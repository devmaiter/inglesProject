<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>üî• HACKER VOCABULARY QUIZ</title>
  <style>
    * { margin:0; padding:0; box-sizing:border-box; }
    body {
      font-family:'Courier New', monospace;
      background:linear-gradient(135deg,#0a0a0a 0%,#1a1a1a 50%,#0d4f3c 100%);
      min-height:100vh; display:flex; justify-content:center; align-items:center;
      padding:20px; color:#00ff00; position:relative; overflow-x:hidden;
    }
    body::before {
      content:''; position:fixed; inset:0;
      background-image:
        radial-gradient(circle at 20% 20%, rgba(0,255,0,.1) 0%, transparent 50%),
        radial-gradient(circle at 80% 80%, rgba(0,255,255,.1) 0%, transparent 50%),
        radial-gradient(circle at 60% 40%, rgba(0,150,0,.05) 0%, transparent 50%);
      animation:matrix 20s infinite linear; pointer-events:none; z-index:-1;
    }
    @keyframes matrix { 0%,100%{transform:translateY(0)} 50%{transform:translateY(-20px)} }

    .container {
      background:rgba(0,0,0,.9); border:2px solid #00ff00; border-radius:10px; padding:30px;
      box-shadow:0 0 30px rgba(0,255,0,.3), inset 0 0 20px rgba(0,255,0,.1);
      text-align:center; max-width:760px; width:100%;
      animation:scanlines 2s infinite linear, glow 3s ease-in-out infinite alternate;
      position:relative;
    }
    @keyframes scanlines {
      0%{box-shadow:0 0 30px rgba(0,255,0,.3), inset 0 0 20px rgba(0,255,0,.1)}
      50%{box-shadow:0 0 40px rgba(0,255,0,.5), inset 0 0 30px rgba(0,255,0,.2)}
      100%{box-shadow:0 0 30px rgba(0,255,0,.3), inset 0 0 20px rgba(0,255,0,.1)}
    }
    @keyframes glow { from{border-color:#00ff00} to{border-color:#00ffff} }

    h1 { color:#00ffff; margin-bottom:20px; font-size:2.2rem; font-weight:700;
      text-shadow:0 0 10px #00ffff; letter-spacing:2px; animation:flicker 2s infinite; }
    @keyframes flicker {0%,100%{opacity:1} 50%{opacity:.8}}

    .score-board {
      display:flex; justify-content:space-around; background:linear-gradient(135deg,#001100 0%,#003300 100%);
      color:#00ff00; padding:15px; border:1px solid #00ff00; border-radius:8px; margin-bottom:20px; font-weight:700;
      box-shadow:0 0 15px rgba(0,255,0,.4);
    }
    .score-item { animation:pulse 2s infinite }
    @keyframes pulse {0%,100%{transform:scale(1)} 50%{transform:scale(1.05)}}

    .progress-text { font-size:.95rem; color:#00ff00; margin-bottom:10px; font-weight:700; text-shadow:0 0 5px #00ff00; }
    .progress { background:#222; border:1px solid #00ff00; border-radius:10px; height:10px; margin-bottom:20px; overflow:hidden; }
    .progress-bar { background:linear-gradient(90deg,#00ff00,#00ffff); height:100%; transition:width .4s ease; border-radius:8px; }
    .result-message { padding:12px; border-radius:8px; margin-bottom:16px; font-weight:700; display:none; border:2px solid; }
    .result-message.correct{
      background:linear-gradient(135deg,#001100,#003300); color:#00ff00; border-color:#00ff00;
      box-shadow:0 0 15px rgba(0,255,0,.5);
    }
    .result-message.incorrect{
      background:linear-gradient(135deg,#330000,#660000); color:#ffcccc; border-color:#ff0000;
      box-shadow:0 0 15px rgba(255,0,0,.5);
    }

    .word-display {
      background:linear-gradient(135deg,#001a1a,#004d4d); color:#00ffff; padding:22px; border:2px solid #00ffff;
      border-radius:10px; margin-bottom:16px; font-size:1.8rem; font-weight:700;
      box-shadow:0 0 20px rgba(0,255,255,.4), inset 0 0 10px rgba(0,255,255,.1);
    }
    .question-text { font-size:1.1rem; color:#00ff00; margin-bottom:18px; font-weight:700; text-shadow:0 0 5px #00ff00; }

    .options-container { display:grid; grid-template-columns:1fr 1fr; gap:14px; margin-bottom:24px; }
    .option-btn {
      background:linear-gradient(135deg,#001100,#002200); border:2px solid #00ff00; border-radius:8px; padding:14px 18px;
      font-size:1rem; font-weight:700; color:#00ff00; cursor:pointer; transition:.25s; min-height:56px; display:flex;
      align-items:center; justify-content:center; text-align:center; position:relative; overflow:hidden;
    }
    .option-btn:hover{ transform:translateY(-2px); box-shadow:0 10px 25px rgba(0,255,0,.35); border-color:#00ffff; color:#00ffff; }
    .option-btn.correct{ background:linear-gradient(135deg,#004400,#008800); border-color:#00ff00; color:#fff; }
    .option-btn.incorrect{ background:linear-gradient(135deg,#550000,#990000); border-color:#ff0000; color:#ffdddd; }

    .action-buttons { display:flex; gap:12px; justify-content:center; flex-wrap:wrap; margin-top:6px; }
    .btn {
      padding:12px 16px; font-size:1rem; font-weight:700; border:2px solid; border-radius:8px; cursor:pointer; transition:.25s;
      min-width:160px; text-transform:uppercase; letter-spacing:1px; background:linear-gradient(135deg,#001a1a,#003d3d); color:#00ffff; border-color:#00ffff;
    }
    .btn:hover{ transform:translateY(-3px); box-shadow:0 0 20px rgba(0,255,255,.45); }

    .final-score {
      background:linear-gradient(135deg,#000f0f,#001f1f); color:#00ffff; padding:24px; border:2px solid #00ffff; border-radius:12px;
      margin-top:18px; display:none; box-shadow:0 0 30px rgba(0,255,255,.6);
    }
    .final-score h2{ margin-bottom:8px; font-size:1.8rem; color:#00ff00; text-shadow:0 0 10px #00ff00; }

    .scan-line { position:absolute; top:0; left:0; width:100%; height:2px;
      background:linear-gradient(90deg,transparent,#00ff00,transparent); animation:scan 3s infinite linear; }
    @keyframes scan { 0%{top:0;opacity:1} 100%{top:100%;opacity:0} }

    @media (max-width:480px){
      .container{ padding:20px; margin:10px }
      h1{ font-size:1.8rem }
      .word-display{ font-size:1.4rem; padding:18px }
      .options-container{ grid-template-columns:1fr }
      .btn{ width:100%; max-width:320px }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="scan-line"></div>
    <h1>üíÄ HACKER VOCABULARY QUIZ</h1>

    <div class="score-board">
      <div class="score-item">üéØ QUESTION: <span id="current-question">1</span>/<span id="total-questions">0</span></div>
      <div class="score-item">‚úÖ CORRECT: <span id="correct-score">0</span></div>
      <div class="score-item">‚ùå FAILED: <span id="incorrect-score">0</span></div>
    </div>

    <div class="progress-text"><span id="progress-text">>>> HACKING PROGRESS...</span></div>
    <div class="progress"><div class="progress-bar" id="progress-bar"></div></div>

    <div class="result-message" id="result-message"></div>

    <div class="word-display" id="word-display">LOADING MATRIX...</div>
    <div class="question-text" id="question-text">&gt; DECODE THE MEANING OF THIS WORD_</div>

    <div class="options-container" id="options-container"></div>

    <div class="action-buttons">
      <button class="btn" id="btn-translate">üß™ TRADUCIR PALABRA</button>
      <button class="btn" id="btn-add">‚ûï AGREGAR PALABRA</button>
      <button class="btn" id="btn-reset">üîÑ RESET_MATRIX</button>
    </div>

    <div class="final-score" id="final-score">
      <h2>üî• MISSION COMPLETE!</h2>
      <p>SUCCESSFUL HACKS: <span id="final-correct">0</span></p>
      <p>FAILED ATTEMPTS: <span id="final-incorrect">0</span></p>
      <p>SUCCESS RATE: <span id="final-percentage">0</span>%</p>
      <p id="final-message"></p>
    </div>
  </div>

  <script>
    // =======================
    //   1) BANCO DE PALABRAS
    // =======================
    const vocabulario = [
      { word: "aware", meaning: "consciente" },
      { word: "borrow", meaning: "pedir prestado" },
      { word: "complain", meaning: "quejarse" },
      { word: "careful", meaning: "cuidadoso" },
      { word: "decide", meaning: "decidir" },
      { word: "distant", meaning: "lejano" },
      { word: "enough", meaning: "suficiente" },
      { word: "except", meaning: "excepto" },
      { word: "famous", meaning: "famoso" },
      { word: "few", meaning: "pocos" },
      { word: "fix", meaning: "arreglar" },
      { word: "follow", meaning: "seguir" },
      { word: "forget", meaning: "olvidar" },
      { word: "friendly", meaning: "amigable" },
      { word: "hardly", meaning: "apenas" },
      { word: "hide", meaning: "esconder" },
      { word: "hope", meaning: "esperar (desear)" },
      { word: "hurry", meaning: "apresurarse" },
      { word: "include", meaning: "incluir" },
      { word: "invite", meaning: "invitar" },
      { word: "keep", meaning: "mantener" },
      { word: "laugh", meaning: "re√≠r" },
      { word: "lazy", meaning: "perezoso" },
      { word: "loud", meaning: "ruidoso" },
      { word: "miss", meaning: "extra√±ar / perder" },
      { word: "nearly", meaning: "casi" },
      { word: "notice", meaning: "notar" },
      { word: "offer", meaning: "ofrecer" },
      { word: "own", meaning: "poseer / propio" },
      { word: "pick", meaning: "escoger" },
      { word: "quiet", meaning: "silencioso" },
      { word: "receive", meaning: "recibir" },
      { word: "reply", meaning: "responder" },
      { word: "rest", meaning: "descansar / el resto" },
      { word: "save", meaning: "guardar / salvar" },
      { word: "shout", meaning: "gritar" },
      { word: "smell", meaning: "oler" },
      { word: "spend", meaning: "gastar (dinero o tiempo)" },
      { word: "strange", meaning: "extra√±o" },
      { word: "wait", meaning: "esperar (tiempo)" },

      { word: "achieve", meaning: "lograr / alcanzar" },
      { word: "allow", meaning: "permitir" },
      { word: "arrange", meaning: "organizar / arreglar" },
      { word: "attend", meaning: "asistir" },
      { word: "avoid", meaning: "evitar" },
      { word: "belong", meaning: "pertenecer" },
      { word: "behave", meaning: "comportarse" },
      { word: "compare", meaning: "comparar" },
      { word: "complaint", meaning: "queja" },
      { word: "confuse", meaning: "confundir" },
      { word: "consider", meaning: "considerar" },
      { word: "contain", meaning: "contener" },
      { word: "convince", meaning: "convencer" },
      { word: "create", meaning: "crear" },
      { word: "damage", meaning: "da√±ar / da√±o" },
      { word: "delay", meaning: "retrasar / retraso" },
      { word: "depend", meaning: "depender" },
      { word: "develop", meaning: "desarrollar" },
      { word: "discover", meaning: "descubrir" },
      { word: "doubt", meaning: "dudar / duda" },
      { word: "earn", meaning: "ganar (dinero, respeto)" },
      { word: "encourage", meaning: "animar / alentar" },
      { word: "enjoyable", meaning: "agradable / divertido" },
      { word: "expect", meaning: "esperar (algo probable)" },
      { word: "explain", meaning: "explicar" },
      { word: "fail", meaning: "fallar / fracasar" },
      { word: "gather", meaning: "reunir / recoger" },
      { word: "improve", meaning: "mejorar" },
      { word: "increase", meaning: "aumentar" },
      { word: "involve", meaning: "involucrar" },
      { word: "mention", meaning: "mencionar" },
      { word: "noticeable", meaning: "notable / que se nota" },
      { word: "prefer", meaning: "preferir" },
      { word: "provide", meaning: "proporcionar" },
      { word: "realize", meaning: "darse cuenta" },
      { word: "recognize", meaning: "reconocer" },
      { word: "reduce", meaning: "reducir" },
      { word: "remind", meaning: "recordar (hacer recordar)" },
      { word: "suggest", meaning: "sugerir" },
      { word: "wonder", meaning: "preguntarse / maravillarse" }
    ];

    // =======================
    //   2) ESTADO DEL JUEGO
    // =======================
    let currentIndex = 0;
    let correct = 0;
    let incorrect = 0;
    let questions = [];

    // =======================
    //   3) UTILIDADES
    // =======================
    const $ = (sel) => document.querySelector(sel);

    function shuffle(arr){
      for(let i=arr.length-1; i>0; i--){
        const j = Math.floor(Math.random()*(i+1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
      return arr;
    }

    function pickOptions(correctMeaning){
      const pool = vocabulario.map(v=>v.meaning).filter(m=>m!==correctMeaning);
      shuffle(pool);
      const opts = [correctMeaning, ...pool.slice(0,3)];
      return shuffle(opts);
    }

    function updateHUD(){
      $("#current-question").textContent = Math.min(currentIndex+1, questions.length);
      $("#total-questions").textContent = questions.length;
      $("#correct-score").textContent = correct;
      $("#incorrect-score").textContent = incorrect;
      const pct = questions.length ? ( (currentIndex)/questions.length )*100 : 0;
      $("#progress-bar").style.width = pct + "%";
    }

    // =======================
    //   4) RENDER PREGUNTA
    // =======================
    function renderQuestion(){
      if(currentIndex >= questions.length){
        return endGame();
      }
      const q = questions[currentIndex];
      $("#word-display").textContent = q.word;
      $("#question-text").textContent = "> DECODE THE MEANING OF THIS WORD_";
      const opts = pickOptions(q.meaning);
      const cont = $("#options-container");
      cont.innerHTML = "";
      opts.forEach(opt=>{
        const btn = document.createElement("button");
        btn.className = "option-btn";
        btn.textContent = opt;
        btn.onclick = ()=> checkAnswer(btn, opt, q.meaning);
        cont.appendChild(btn);
      });
      $("#result-message").style.display = "none";
      updateHUD();
    }

    function checkAnswer(btn, selected, correctMeaning){
      const buttons = Array.from(document.querySelectorAll(".option-btn"));
      buttons.forEach(b=> b.disabled = true);
      const result = $("#result-message");
      if(selected === correctMeaning){
        correct++;
        btn.classList.add("correct");
        result.className = "result-message correct";
        result.textContent = "‚úÖ Correct!";
      }else{
        incorrect++;
        btn.classList.add("incorrect");
        const good = buttons.find(b=>b.textContent===correctMeaning);
        if(good) good.classList.add("correct");
        result.className = "result-message incorrect";
        result.textContent = "‚ùå Incorrect. Correct answer: " + correctMeaning;
      }
      result.style.display = "block";
      currentIndex++;
      setTimeout(renderQuestion, 850);
    }

    function endGame(){
      $("#options-container").innerHTML = "";
      $("#word-display").textContent = "SYSTEM IDLE";
      $("#question-text").textContent = "> TRAINING SESSION ENDED_";
      $("#result-message").style.display = "none";
      const total = questions.length || 1;
      const pct = Math.round((correct/total)*100);
      $("#final-correct").textContent = correct;
      $("#final-incorrect").textContent = incorrect;
      $("#final-percentage").textContent = pct;
      $("#final-message").textContent = pct >= 80 ? "Elite level. Keep pushing." : "Good job. Train more for mastery.";
      $("#final-score").style.display = "block";
      $("#progress-bar").style.width = "100%";
      $("#current-question").textContent = total;
    }

    function restartQuiz(){
      $("#final-score").style.display = "none";
      currentIndex = 0; correct = 0; incorrect = 0;
      questions = shuffle([...vocabulario]); // copia + aleatorio
      updateHUD();
      renderQuestion();
    }

    $("#btn-reset").addEventListener("click", restartQuiz);

    // =======================
    //   5) API DE TRADUCCI√ìN
    // =======================
    // Instancia p√∫blica tipo LibreTranslate (para demos). En producci√≥n: usa backend propio.
    const LT_ENDPOINT = "https://lt.vern.cc/translate";

    async function apiTranslate(q, source="en", target="es"){
      const r = await fetch(LT_ENDPOINT, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ q, source, target })
      });
      if(!r.ok){
        const t = await r.text().catch(()=> "");
        throw new Error(`HTTP ${r.status} ${t}`.trim());
      }
      const data = await r.json();
      if(!data || typeof data.translatedText !== "string"){
        throw new Error("Respuesta inv√°lida del servidor");
      }
      return data.translatedText;
    }
    // Exponer a consola: t("Hola","es","en").then(console.log)
    window.t = apiTranslate;

    // =======================
    //   6) BOT√ìN: TRADUCIR
    // =======================
    $("#btn-translate").addEventListener("click", async () => {
      try{
        const current = (questions[currentIndex] || {}).word;
        const useCurrent = confirm(`¬øTraducir la palabra actual?\nActual: "${current || "‚Äî"}"\n\nAceptar: usar actual (EN‚ÜíES)\nCancelar: escribir texto propio`);
        let text, source="en", target="es";
        if(useCurrent && current){
          text = current;
        }else{
          text = prompt("Texto a traducir:");
          if(!text) return;
          const dir = confirm("Aceptar: ES‚ÜíEN\nCancelar: EN‚ÜíES");
          source = dir ? "es" : "en";
          target = dir ? "en" : "es";
        }
        const out = await apiTranslate(text, source, target);
        alert(`Traducci√≥n (${source}‚Üí${target}):\n\n${out}`);
      }catch(e){
        alert("Error al traducir: " + (e?.message || e));
      }
    });

    // =======================
    //   7) BOT√ìN: AGREGAR PALABRA
    // =======================
    $("#btn-add").addEventListener("click", async () => {
      try{
        const en = prompt("Nueva palabra en INGL√âS (ej: resilient):");
        if(!en) return;
        // Traduce con la API (EN‚ÜíES)
        const es = await apiTranslate(en, "en", "es");
        // Confirmar al usuario
        const ok = confirm(`Se agregar√°:\n\nword: "${en}"\nmeaning: "${es}"\n\n¬øConfirmar?`);
        if(!ok) return;
        // Insertar y refrescar conteo
        vocabulario.push({ word: en.trim(), meaning: es.trim() });
        alert("‚úÖ Palabra agregada al banco del quiz.");
        // Si no hay sesi√≥n en curso, reinicia; si hay, actualiza total
        $("#total-questions").textContent = vocabulario.length;
        if(questions.length === 0 || currentIndex >= questions.length){
          restartQuiz();
        }
      }catch(e){
        alert("No se pudo agregar: " + (e?.message || e));
      }
    });

    // =======================
    //   8) INICIO
    // =======================
    restartQuiz();
  </script>
</body>
</html>