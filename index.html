<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🔥 SMART HACKER VOCABULARY QUIZ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Courier New', monospace;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 50%, #0d4f3c 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            color: #00ff00;
            position: relative;
            overflow-x: hidden;
        }

        /* Efecto Matrix de fondo */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(circle at 20% 20%, rgba(0, 255, 0, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(0, 255, 255, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 60% 40%, rgba(0, 150, 0, 0.05) 0%, transparent 50%);
            animation: matrix 20s infinite linear;
            pointer-events: none;
            z-index: -1;
        }

        @keyframes matrix {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        .container {
            background: rgba(0, 0, 0, 0.9);
            border: 2px solid #00ff00;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 
                0 0 30px rgba(0, 255, 0, 0.3),
                inset 0 0 20px rgba(0, 255, 0, 0.1);
            text-align: center;
            max-width: 700px;
            width: 100%;
            animation: scanlines 2s infinite linear, glow 3s ease-in-out infinite alternate;
            position: relative;
        }

        @keyframes scanlines {
            0% { box-shadow: 0 0 30px rgba(0, 255, 0, 0.3), inset 0 0 20px rgba(0, 255, 0, 0.1); }
            50% { box-shadow: 0 0 40px rgba(0, 255, 0, 0.5), inset 0 0 30px rgba(0, 255, 0, 0.2); }
            100% { box-shadow: 0 0 30px rgba(0, 255, 0, 0.3), inset 0 0 20px rgba(0, 255, 0, 0.1); }
        }

        @keyframes glow {
            from { border-color: #00ff00; }
            to { border-color: #00ffff; }
        }

        h1 {
            color: #00ffff;
            margin-bottom: 20px;
            font-size: 2.2rem;
            font-weight: bold;
            text-shadow: 0 0 10px #00ffff;
            letter-spacing: 2px;
            animation: typing 0.5s ease-out, flicker 2s infinite;
        }

        @keyframes flicker {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.8; }
        }

        @keyframes typing {
            from { width: 0; }
            to { width: 100%; }
        }

        .score-board {
            display: flex;
            justify-content: space-around;
            background: linear-gradient(135deg, #001100 0%, #003300 100%);
            color: #00ff00;
            padding: 15px;
            border: 1px solid #00ff00;
            border-radius: 8px;
            margin-bottom: 25px;
            font-weight: bold;
            box-shadow: 0 0 15px rgba(0, 255, 0, 0.4);
        }

        .score-item {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        /* NUEVO: Stats de aprendizaje */
        .learning-stats {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 10px;
            margin-bottom: 20px;
            font-size: 0.8rem;
        }

        .stat-item {
            background: linear-gradient(135deg, #001a00 0%, #003300 100%);
            padding: 8px;
            border: 1px solid #00ff00;
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(0, 255, 0, 0.3);
        }

        .stat-mastered { border-color: #00ff00; color: #00ff00; }
        .stat-learning { border-color: #ffff00; color: #ffff00; }
        .stat-failed { border-color: #ff6600; color: #ff6600; }

        .word-display {
            background: linear-gradient(135deg, #001a1a 0%, #004d4d 100%);
            color: #00ffff;
            padding: 25px;
            border: 2px solid #00ffff;
            border-radius: 10px;
            margin-bottom: 30px;
            font-size: 1.8rem;
            font-weight: bold;
            box-shadow: 
                0 0 20px rgba(0, 255, 255, 0.4),
                inset 0 0 10px rgba(0, 255, 255, 0.1);
            animation: wordGlow 3s ease-in-out infinite alternate;
            letter-spacing: 1px;
            position: relative;
        }

        /* NUEVO: Indicador de dificultad */
        .word-display::before {
            content: attr(data-attempts);
            position: absolute;
            top: -10px;
            right: -10px;
            background: #ff6600;
            color: white;
            border-radius: 50%;
            width: 25px;
            height: 25px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            font-weight: bold;
        }

        @keyframes wordGlow {
            from { 
                box-shadow: 0 0 20px rgba(0, 255, 255, 0.4), inset 0 0 10px rgba(0, 255, 255, 0.1);
                transform: scale(1);
            }
            to { 
                box-shadow: 0 0 30px rgba(0, 255, 255, 0.6), inset 0 0 15px rgba(0, 255, 255, 0.2);
                transform: scale(1.02);
            }
        }

        .question-text {
            font-size: 1.2rem;
            color: #00ff00;
            margin-bottom: 20px;
            font-weight: bold;
            text-shadow: 0 0 5px #00ff00;
        }

        .options-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 30px;
        }

        .option-btn {
            background: linear-gradient(135deg, #001100 0%, #002200 100%);
            border: 2px solid #00ff00;
            border-radius: 8px;
            padding: 15px 20px;
            font-size: 1rem;
            font-weight: bold;
            color: #00ff00;
            cursor: pointer;
            transition: all 0.3s ease;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            font-family: 'Courier New', monospace;
            position: relative;
            overflow: hidden;
        }

        .option-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0, 255, 0, 0.3), transparent);
            transition: left 0.5s;
        }

        .option-btn:hover::before {
            left: 100%;
        }

        .option-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0, 255, 0, 0.4);
            border-color: #00ffff;
            color: #00ffff;
        }

        .option-btn.selected {
            background: linear-gradient(135deg, #003300 0%, #006600 100%);
            border-color: #00ffff;
            color: #00ffff;
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 255, 255, 0.4);
        }

        .option-btn.correct {
            background: linear-gradient(135deg, #004400 0%, #008800 100%);
            border-color: #00ff00;
            color: #ffffff;
            animation: correctPulse 0.8s ease-out;
            box-shadow: 0 0 30px rgba(0, 255, 0, 0.8);
        }

        .option-btn.incorrect {
            background: linear-gradient(135deg, #440000 0%, #880000 100%);
            border-color: #ff0000;
            color: #ffcccc;
            animation: errorShake 0.6s ease-out;
            box-shadow: 0 0 20px rgba(255, 0, 0, 0.6);
        }

        @keyframes correctPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        @keyframes errorShake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-8px); }
            75% { transform: translateX(8px); }
        }

        .action-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 24px;
            font-size: 1rem;
            font-weight: bold;
            border: 2px solid;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 140px;
            font-family: 'Courier New', monospace;
            text-transform: uppercase;
            letter-spacing: 1px;
            position: relative;
            overflow: hidden;
        }

        .restart-btn {
            background: linear-gradient(135deg, #001a1a 0%, #003d3d 100%);
            color: #00ffff;
            border-color: #00ffff;
        }

        .restart-btn:hover {
            background: linear-gradient(135deg, #003d3d 0%, #007a7a 100%);
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.5);
            transform: translateY(-3px);
        }

        /* NUEVO: Botón reset progress */
        .reset-progress-btn {
            background: linear-gradient(135deg, #1a0000 0%, #3d0000 100%);
            color: #ff6600;
            border-color: #ff6600;
        }

        .reset-progress-btn:hover {
            background: linear-gradient(135deg, #3d0000 0%, #7a0000 100%);
            box-shadow: 0 0 20px rgba(255, 102, 0, 0.5);
            transform: translateY(-3px);
        }

        .progress {
            background: #222;
            border: 1px solid #00ff00;
            border-radius: 10px;
            height: 10px;
            margin-bottom: 20px;
            overflow: hidden;
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.5);
        }

        .progress-bar {
            background: linear-gradient(90deg, #00ff00, #00ffff);
            height: 100%;
            transition: width 0.5s ease;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 255, 0, 0.8);
            animation: progressGlow 2s ease-in-out infinite alternate;
        }

        @keyframes progressGlow {
            from { box-shadow: 0 0 10px rgba(0, 255, 0, 0.8); }
            to { box-shadow: 0 0 20px rgba(0, 255, 255, 0.8); }
        }

        .progress-text {
            font-size: 0.9rem;
            color: #00ff00;
            margin-bottom: 10px;
            font-weight: bold;
            text-shadow: 0 0 5px #00ff00;
        }

        .result-message {
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-weight: bold;
            display: none;
            animation: slideIn 0.5s ease-out;
            border: 2px solid;
        }

        .result-message.correct {
            background: linear-gradient(135deg, #001100 0%, #003300 100%);
            color: #00ff00;
            border-color: #00ff00;
            box-shadow: 0 0 15px rgba(0, 255, 0, 0.5);
        }

        .result-message.incorrect {
            background: linear-gradient(135deg, #330000 0%, #660000 100%);
            color: #ffcccc;
            border-color: #ff0000;
            box-shadow: 0 0 15px rgba(255, 0, 0, 0.5);
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(-30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .final-score {
            background: linear-gradient(135deg, #000f0f 0%, #001f1f 100%);
            color: #00ffff;
            padding: 30px;
            border: 2px solid #00ffff;
            border-radius: 15px;
            margin-top: 20px;
            display: none;
            box-shadow: 0 0 30px rgba(0, 255, 255, 0.6);
            animation: finalGlow 2s ease-in-out infinite alternate;
        }

        @keyframes finalGlow {
            from { box-shadow: 0 0 30px rgba(0, 255, 255, 0.6); }
            to { box-shadow: 0 0 50px rgba(0, 255, 0, 0.8); }
        }

        .final-score h2 {
            margin-bottom: 15px;
            font-size: 2rem;
            color: #00ff00;
            text-shadow: 0 0 10px #00ff00;
        }

        .final-score p {
            font-size: 1.2rem;
            margin-bottom: 10px;
            color: #00ffff;
        }

        /* Terminal-style typing effect */
        .typing::after {
            content: '|';
            animation: blink 1s infinite;
        }

        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }

        @media (max-width: 480px) {
            .container {
                padding: 20px;
                margin: 10px;
            }
            
            h1 {
                font-size: 1.8rem;
            }
            
            .word-display {
                font-size: 1.4rem;
                padding: 20px;
            }
            
            .options-container {
                grid-template-columns: 1fr;
            }
            
            .action-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .btn {
                width: 100%;
                max-width: 300px;
            }

            .learning-stats {
                grid-template-columns: 1fr;
                gap: 5px;
            }
        }

        /* Efecto de escaneo */
        .scan-line {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg, transparent, #00ff00, transparent);
            animation: scan 3s infinite linear;
        }

        @keyframes scan {
            0% { top: 0; opacity: 1; }
            100% { top: 100%; opacity: 0; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="scan-line"></div>
        <h1 class="typing">🧠 SMART HACKER VOCABULARY</h1>
        
        <!-- NUEVO: Stats de aprendizaje -->
        <div class="learning-stats">
            <div class="stat-item stat-mastered">
                <div>💚 MASTERED</div>
                <div><span id="mastered-count">0</span></div>
            </div>
            <div class="stat-item stat-learning">
                <div>⚡ LEARNING</div>
                <div><span id="learning-count">0</span></div>
            </div>
            <div class="stat-item stat-failed">
                <div>🔥 PENDING</div>
                <div><span id="pending-count">0</span></div>
            </div>
        </div>
        
        <div class="score-board">
            <div class="score-item">🎯 QUESTION: <span id="current-question">1</span>/<span id="total-questions">167</span></div>
            <div class="score-item">✅ CORRECT: <span id="correct-score">0</span></div>
            <div class="score-item">❌ FAILED: <span id="incorrect-score">0</span></div>
        </div>

        <div class="progress-text">
            <span id="progress-text">>>> ADAPTIVE LEARNING...</span>
        </div>
        <div class="progress">
            <div class="progress-bar" id="progress-bar"></div>
        </div>

        <div class="result-message" id="result-message"></div>

        <div class="word-display" id="word-display" data-attempts="0">
            LOADING MATRIX...
        </div>

        <div class="question-text" id="question-text">
            > DECODE THE MEANING OF THIS WORD_
        </div>

        <div class="options-container" id="options-container">
            <!-- Las opciones se generan dinámicamente -->
        </div>

        <div class="action-buttons">
            <button class="btn restart-btn" onclick="restartQuiz()">
                🔄 NEW_SESSION
            </button>
            <button class="btn reset-progress-btn" onclick="resetProgress()">
                💣 RESET_ALL
            </button>
        </div>

        <div class="final-score" id="final-score">
            <h2>🔥 LEARNING SESSION COMPLETE!</h2>
            <p>SUCCESSFUL HACKS: <span id="final-correct">0</span></p>
            <p>FAILED ATTEMPTS: <span id="final-incorrect">0</span></p>
            <p>WORDS MASTERED: <span id="final-mastered">0</span></p>
            <p>SUCCESS RATE: <span id="final-percentage">0</span>%</p>
            <p id="final-message"></p>
        </div>
    </div>

    <script>
        // 🔥 VOCABULARIO COMPLETO
const vocabulario = [
    // Palabras no muy comunes (nivel A1–B1)
    { word: "aware", meaning: "consciente" },
    { word: "borrow", meaning: "pedir prestado" },
    { word: "complain", meaning: "quejarse" },
    { word: "careful", meaning: "cuidadoso" },
    { word: "decide", meaning: "decidir" },
    { word: "distant", meaning: "lejano" },
    { word: "enough", meaning: "suficiente" },
    { word: "except", meaning: "excepto" },
    { word: "famous", meaning: "famoso" },
    { word: "few", meaning: "pocos" },
    { word: "fix", meaning: "arreglar" },
    { word: "follow", meaning: "seguir" },
    { word: "forget", meaning: "olvidar" },
    { word: "friendly", meaning: "amigable" },
    { word: "hardly", meaning: "apenas" },
    { word: "hide", meaning: "esconder" },
    { word: "hope", meaning: "esperar (desear)" },
    { word: "hurry", meaning: "apresurarse" },
    { word: "include", meaning: "incluir" },
    { word: "invite", meaning: "invitar" },
    { word: "keep", meaning: "mantener" },
    { word: "laugh", meaning: "reír" },
    { word: "lazy", meaning: "perezoso" },
    { word: "loud", meaning: "ruidoso" },
    { word: "miss", meaning: "extrañar / perder" },
    { word: "nearly", meaning: "casi" },
    { word: "notice", meaning: "notar" },
    { word: "offer", meaning: "ofrecer" },
    { word: "own", meaning: "poseer / propio" },
    { word: "pick", meaning: "escoger" },
    { word: "quiet", meaning: "silencioso" },
    { word: "receive", meaning: "recibir" },
    { word: "reply", meaning: "responder" },
    { word: "rest", meaning: "descansar / el resto" },
    { word: "save", meaning: "guardar / salvar" },
    { word: "shout", meaning: "gritar" },
    { word: "smell", meaning: "oler" },
    { word: "spend", meaning: "gastar (dinero o tiempo)" },
    { word: "strange", meaning: "extraño" },
    { word: "wait", meaning: "esperar (tiempo)" },

    // Palabras más complejas (A2–B1 alto)
    { word: "achieve", meaning: "lograr / alcanzar" },
    { word: "allow", meaning: "permitir" },
    { word: "arrange", meaning: "organizar / arreglar" },
    { word: "attend", meaning: "asistir" },
    { word: "avoid", meaning: "evitar" },
    { word: "belong", meaning: "pertenecer" },
    { word: "behave", meaning: "comportarse" },
    { word: "compare", meaning: "comparar" },
    { word: "complaint", meaning: "queja" },
    { word: "confuse", meaning: "confundir" },
    { word: "consider", meaning: "considerar" },
    { word: "contain", meaning: "contener" },
    { word: "convince", meaning: "convencer" },
    { word: "create", meaning: "crear" },
    { word: "damage", meaning: "dañar / daño" },
    { word: "delay", meaning: "retrasar / retraso" },
    { word: "depend", meaning: "depender" },
    { word: "develop", meaning: "desarrollar" },
    { word: "discover", meaning: "descubrir" },
    { word: "doubt", meaning: "dudar / duda" },
    { word: "earn", meaning: "ganar (dinero, respeto)" },
    { word: "encourage", meaning: "animar / alentar" },
    { word: "enjoyable", meaning: "agradable / divertido" },
    { word: "expect", meaning: "esperar (algo probable)" },
    { word: "explain", meaning: "explicar" },
    { word: "fail", meaning: "fallar / fracasar" },
    { word: "gather", meaning: "reunir / recoger" },
    { word: "improve", meaning: "mejorar" },
    { word: "increase", meaning: "aumentar" },
    { word: "involve", meaning: "involucrar" },
    { word: "mention", meaning: "mencionar" },
    { word: "noticeable", meaning: "notable / que se nota" },
    { word: "prefer", meaning: "preferir" },
    { word: "provide", meaning: "proporcionar" },
    { word: "realize", meaning: "darse cuenta" },
    { word: "recognize", meaning: "reconocer" },
    { word: "reduce", meaning: "reducir" },
    { word: "remind", meaning: "recordar (hacer recordar)" },
    { word: "suggest", meaning: "sugerir" },
    { word: "wonder", meaning: "preguntarse / maravillarse" }
];

        // 🧠 SISTEMA DE APRENDIZAJE INTELIGENTE
        let wordStats = {}; // {word: {attempts: 0, correct: 0, mastered: false, lastSeen: Date}}
        let learningQueue = []; // Palabras que necesitan práctica
        let sessionStats = {
            questionsAnswered: 0,
            correctAnswers: 0,
            incorrectAnswers: 0,
            wordsLearned: 0
        };

        let currentWord = null;
        let hasAnswered = false;

        // 🚀 INICIALIZAR SISTEMA
        function initializeLearningSystem() {
            console.log('🧠 INITIALIZING SMART LEARNING SYSTEM...');
            
            // Cargar progreso desde localStorage
            loadProgress();
            
            // Inicializar stats para palabras nuevas
            vocabulario.forEach(word => {
                if (!wordStats[word.word]) {
                    wordStats[word.word] = {
                        attempts: 0,
                        correct: 0,
                        mastered: false,
                        lastSeen: null,
                        failCount: 0
                    };
                }
            });
            
            // Construir cola de aprendizaje
            buildLearningQueue();
            
            // Resetear stats de sesión
            sessionStats = {
                questionsAnswered: 0,
                correctAnswers: 0,
                incorrectAnswers: 0,
                wordsLearned: 0
            };
            
            updateLearningStats();
            loadNextWord();
        }

        // 📊 CONSTRUIR COLA DE APRENDIZAJE INTELIGENTE
        function buildLearningQueue() {
            learningQueue = [];
            
            // Separar palabras por estado
            let newWords = [];
            let failedWords = [];
            let reviewWords = [];
            
            vocabulario.forEach(item => {
                const stats = wordStats[item.word];
                
                if (stats.mastered) {
                    // Palabras dominadas - ocasionalmente para repaso
                    if (Math.random() < 0.1) reviewWords.push(item);
                } else if (stats.attempts === 0) {
                    // Palabras nuevas
                    newWords.push(item);
                } else if (stats.failCount > stats.correct) {
                    // Palabras con más fallos que aciertos - prioridad alta
                    for (let i = 0; i < Math.min(3, stats.failCount); i++) {
                        failedWords.push(item);
                    }
                } else {
                    // Palabras en proceso de aprendizaje
                    reviewWords.push(item);
                }
            });
            
            // Mezclar cada categoría
            newWords = shuffleArray(newWords);
            failedWords = shuffleArray(failedWords);
            reviewWords = shuffleArray(reviewWords);
            
            // Construir cola: palabras fallidas (prioridad), nuevas, repaso
            learningQueue = [...failedWords, ...newWords, ...reviewWords];
            
            console.log(`📚 Learning Queue: ${failedWords.length} failed, ${newWords.length} new, ${reviewWords.length} review`);
        }

        // 🎯 CARGAR SIGUIENTE PALABRA
        function loadNextWord() {
            if (learningQueue.length === 0) {
                // Reconstruir cola si está vacía
                buildLearningQueue();
                if (learningQueue.length === 0) {
                    showCompletionMessage();
                    return;
                }
            }

            currentWord = learningQueue.shift();
            const stats = wordStats[currentWord.word];
            hasAnswered = false;
            
            // Actualizar UI
            const wordDisplay = document.getElementById('word-display');
            wordDisplay.textContent = '';
            wordDisplay.setAttribute('data-attempts', stats.attempts);
            typeText(wordDisplay, currentWord.word.toUpperCase(), 50);
            
            document.getElementById('result-message').style.display = 'none';
            
            // Generar opciones
            generateOptions(currentWord);
            
            // Actualizar progreso
            updateProgress();
            updateLearningStats();
            
            console.log(`🎯 Current word: "${currentWord.word}" (attempts: ${stats.attempts}, correct: ${stats.correct})`);
        }

        // 🎲 GENERAR OPCIONES
        function generateOptions(correctItem) {
            const options = [correctItem.meaning];
            
            // Obtener 3 opciones incorrectas
            const otherWords = vocabulario.filter(w => w.word !== correctItem.word);
            const shuffled = shuffleArray(otherWords);
            
            for (let i = 0; i < 3 && i < shuffled.length; i++) {
                options.push(shuffled[i].meaning);
            }
            
            const shuffledOptions = shuffleArray(options);
            
            // Crear botones
            const container = document.getElementById('options-container');
            container.innerHTML = '';
            
            shuffledOptions.forEach((option, index) => {
                setTimeout(() => {
                    const button = document.createElement('button');
                    button.className = 'option-btn';
                    button.textContent = option.toUpperCase();
                    button.onclick = () => selectOption(button, option, correctItem.meaning);
                    container.appendChild(button);
                }, index * 200);
            });
        }

        // ✅ SELECCIONAR OPCIÓN
        function selectOption(button, selectedAnswer, correctAnswer) {
            if (hasAnswered) return;
            
            hasAnswered = true;
            const isCorrect = selectedAnswer.toLowerCase() === correctAnswer.toLowerCase();
            const stats = wordStats[currentWord.word];
            
            // Actualizar estadísticas de la palabra
            stats.attempts++;
            stats.lastSeen = Date.now();
            
            // Marcar opciones visualmente
            const allOptions = document.querySelectorAll('.option-btn');
            allOptions.forEach(btn => {
                btn.style.pointerEvents = 'none';
                if (btn.textContent.toLowerCase() === correctAnswer.toLowerCase()) {
                    btn.classList.add('correct');
                } else if (btn === button && !isCorrect) {
                    btn.classList.add('incorrect');
                }
            });
            
            if (isCorrect) {
                // ✅ RESPUESTA CORRECTA
                stats.correct++;
                sessionStats.correctAnswers++;
                
                // Verificar si se domina la palabra (3 aciertos consecutivos sin fallos recientes)
                if (stats.correct >= 2 && stats.failCount <= stats.correct) {
                    stats.mastered = true;
                    sessionStats.wordsLearned++;
                    showResultMessage(`🔥 WORD MASTERED! "${currentWord.word}" ELIMINATED FROM TRAINING!`, 'correct');
                } else {
                    showResultMessage('>>> ACCESS GRANTED! HACK SUCCESSFUL! 🔥', 'correct');
                }
            } else {
                // ❌ RESPUESTA INCORRECTA
                stats.failCount++;
                sessionStats.incorrectAnswers++;
                stats.mastered = false; // Des-dominar si falla
                
                // Re-agregar a la cola para práctica adicional
                const repeatCount = Math.min(2, stats.failCount);
                for (let i = 0; i < repeatCount; i++) {
                    learningQueue.unshift(currentWord);
                }
                
                showResultMessage(`>>> ACCESS DENIED! TARGET: "${correctAnswer.toUpperCase()}" - WORD QUEUED FOR RETRY`, 'incorrect');
            }
            
            sessionStats.questionsAnswered++;
            saveProgress();
            updateSessionStats();
            
            // Auto-avanzar
            setTimeout(() => {
                loadNextWord();
            }, isCorrect && stats.mastered ? 3000 : 2500);
        }

        // 💾 GUARDAR PROGRESO
        function saveProgress() {
            try {
                localStorage.setItem('hackerVocabProgress', JSON.stringify(wordStats));
                console.log('💾 Progress saved');
            } catch (e) {
                console.warn('⚠️ Could not save progress:', e);
            }
        }

        // 📖 CARGAR PROGRESO
        function loadProgress() {
            try {
                const saved = localStorage.getItem('hackerVocabProgress');
                if (saved) {
                    wordStats = JSON.parse(saved);
                    console.log('📖 Progress loaded');
                }
            } catch (e) {
                console.warn('⚠️ Could not load progress:', e);
                wordStats = {};
            }
        }

        // 🗑️ RESETEAR PROGRESO
        function resetProgress() {
            if (confirm('⚠️ This will DELETE all your learning progress!\n\nAre you sure?')) {
                localStorage.removeItem('hackerVocabProgress');
                wordStats = {};
                console.log('🗑️ Progress reset');
                initializeLearningSystem();
            }
        }

        // 📊 ACTUALIZAR STATS DE APRENDIZAJE
        function updateLearningStats() {
            const mastered = Object.values(wordStats).filter(s => s.mastered).length;
            const learning = Object.values(wordStats).filter(s => s.attempts > 0 && !s.mastered).length;
            const pending = vocabulario.length - mastered - learning;
            
            document.getElementById('mastered-count').textContent = mastered;
            document.getElementById('learning-count').textContent = learning;
            document.getElementById('pending-count').textContent = pending;
        }

        // 📈 ACTUALIZAR STATS DE SESIÓN
        function updateSessionStats() {
            document.getElementById('current-question').textContent = sessionStats.questionsAnswered + 1;
            document.getElementById('total-questions').textContent = `∞`;
            document.getElementById('correct-score').textContent = sessionStats.correctAnswers;
            document.getElementById('incorrect-score').textContent = sessionStats.incorrectAnswers;
        }

        // 🎉 MOSTRAR MENSAJE DE FINALIZACIÓN
        function showCompletionMessage() {
            const mastered = Object.values(wordStats).filter(s => s.mastered).length;
            const total = vocabulario.length;
            
            if (mastered === total) {
                showFinalScore();
            } else {
                showResultMessage('🧠 SESSION COMPLETE! REBUILDING LEARNING QUEUE...', 'correct');
                setTimeout(() => {
                    initializeLearningSystem();
                }, 2000);
            }
        }

        // 🏁 MOSTRAR PUNTUACIÓN FINAL
        function showFinalScore() {
            const mastered = Object.values(wordStats).filter(s => s.mastered).length;
            const total = vocabulario.length;
            const percentage = Math.round((mastered / total) * 100);
            
            document.getElementById('final-correct').textContent = sessionStats.correctAnswers;
            document.getElementById('final-incorrect').textContent = sessionStats.incorrectAnswers;
            document.getElementById('final-mastered').textContent = mastered;
            document.getElementById('final-percentage').textContent = percentage;
            
            let message = '';
            if (percentage === 100) {
                message = '🧠 VOCABULARY MATRIX FULLY DECODED! ELITE HACKER STATUS!';
            } else if (percentage >= 80) {
                message = '🔥 ADVANCED HACKER! MOST SYSTEMS COMPROMISED!';
            } else if (percentage >= 50) {
                message = '💀 SKILLED HACKER! KEEP TRAINING FOR MASTERY!';
            } else {
                message = '⚡ LEARNING IN PROGRESS! PRACTICE MAKES PERFECT!';
            }
            
            document.getElementById('final-message').textContent = message;
            document.getElementById('final-score').style.display = 'block';
        }

        // 🔄 REINICIAR SESIÓN
        function restartQuiz() {
            document.getElementById('final-score').style.display = 'none';
            initializeLearningSystem();
        }

        // 📊 ACTUALIZAR PROGRESO
        function updateProgress() {
            const mastered = Object.values(wordStats).filter(s => s.mastered).length;
            const total = vocabulario.length;
            const progress = (mastered / total) * 100;
            
            document.getElementById('progress-bar').style.width = `${progress}%`;
            document.getElementById('progress-text').textContent = 
                `>>> VOCABULARY MASTERY: ${Math.round(progress)}% COMPLETE`;
        }

        // 🎨 EFECTO DE TYPING
        function typeText(element, text, speed = 100) {
            let i = 0;
            const timer = setInterval(() => {
                if (i < text.length) {
                    element.textContent += text.charAt(i);
                    i++;
                } else {
                    clearInterval(timer);
                }
            }, speed);
        }

        // 📝 MOSTRAR MENSAJE DE RESULTADO
        function showResultMessage(message, type) {
            const resultMsg = document.getElementById('result-message');
            resultMsg.textContent = '';
            resultMsg.className = `result-message ${type}`;
            resultMsg.style.display = 'block';
            typeText(resultMsg, message, 30);
        }

        // 🔀 MEZCLAR ARRAY
        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        // 🚀 INICIALIZAR AL CARGAR
        window.addEventListener('load', () => {
            initializeLearningSystem();
            
            // Remover cursor typing
            setTimeout(() => {
                document.querySelector('h1').classList.remove('typing');
            }, 2000);
        });

        // 🛠️ FUNCIONES DE CONSOLA PARA DEBUG
        window.hackStats = function() {
            console.log('🧠 === LEARNING SYSTEM STATUS ===');
            console.log('Word Stats:', wordStats);
            console.log('Learning Queue Length:', learningQueue.length);
            console.log('Session Stats:', sessionStats);
            
            const mastered = Object.values(wordStats).filter(s => s.mastered).length;
            const learning = Object.values(wordStats).filter(s => s.attempts > 0 && !s.mastered).length;
            console.log(`Progress: ${mastered} mastered, ${learning} learning, ${vocabulario.length - mastered - learning} pending`);
        };

        window.forceComplete = function() {
            Object.keys(wordStats).forEach(word => {
                wordStats[word].mastered = true;
            });
            saveProgress();
            showFinalScore();
        };

        console.log(`
🧠 === SMART LEARNING SYSTEM ACTIVATED ===
🎯 ADAPTIVE VOCABULARY TRAINING
• hackStats() - System status  
• forceComplete() - Mark all complete
• resetProgress() - Clear all data
=========================================
        `);
    </script>
</body>
</html>
